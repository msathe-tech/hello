// Do not edit this file - it's automatically generated
:toc:
= SCRIPTS

pipeline.sh(1)
==============
:compat-mode!:

NAME
----
pipeline.sh - a shell script

SYNOPSIS
--------

Contains default setup for all Concourse scripts.

* Copies the Cloud Pipelines Scripts to a subfolder of the repository to reference it in further steps.
* Sources Concourse scripts utility functions
* References variables from the key-value Concourse resource
* Generates required settings.xml / gradle.properties values
* Sources pipeline.sh script from Cloud Pipelines Scripts



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 43 line(s). Calls functions:

 Script-Body
 `-- resource-utils.sh/exportKeyValProperties

Uses feature(s): _export_, _source_

_Exports (environment):_ CI [big]*//* LATEST_PROD_TAG [big]*//* PIPELINE_VERSION [big]*//* SCRIPTS_OUTPUT_FOLDER [big]*//* TERM


generate-settings.sh(1)
=======================
:compat-mode!:

NAME
----
generate-settings.sh - a shell script

SYNOPSIS
--------

Generates settings.xml and gradle.properties#



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 42 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).


resource-utils.sh(1)
====================
:compat-mode!:

NAME
----
resource-utils.sh - a shell script

SYNOPSIS
--------

Contains

* utility functions required by the key-value Concourse resource.
* functions for setting up the ssh agent



FUNCTIONS
---------

 exportKeyValProperties
 load_pubkey
 passKeyValProperties

DETAILS
-------

Script Body
~~~~~~~~~~~

Has 10 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_

_Exports (environment):_ SSH_AGENT_BIN [big]*//* TEST_MODE [big]*//* TMPDIR

exportKeyValProperties
~~~~~~~~~~~~~~~~~~~~~~

____
 # Reads all key-value pairs in keyval.properties input file and exports them as env vars
____

Has 14 line(s). Doesn't call other functions.

Uses feature(s): _export_

Called by:

 pipeline.sh/Script-Body

_Environment variables used:_ task.sh -> KEYVAL_RESOURCE [big]*//* task.sh -> ROOT_FOLDER

load_pubkey
~~~~~~~~~~~

____
 # Loads git key - needed for prod-rollback to delete prod tag after rollback
____

Has 22 line(s). Doesn't call other functions.

Uses feature(s): _eval_, _trap_

Not called by script or any function (may be e.g. a hook, a Zle widget, etc.).

_Environment variables used:_ SSH_AGENT_BIN [big]*//* TEST_MODE [big]*//* TMPDIR

passKeyValProperties
~~~~~~~~~~~~~~~~~~~~

____
 # Writes all env vars that begin with PASSED_ to the keyval.properties output file
____

Has 13 line(s). Doesn't call other functions.

Called by:

 task.sh/\]

_Environment variables used:_ task.sh -> KEYVALOUTPUT_RESOURCE [big]*//* task.sh -> ROOT_FOLDER


task.sh(1)
==========
:compat-mode!:

NAME
----
task.sh - a shell script

SYNOPSIS
--------

Contains default setup for a generic Cloud Pipelines Concourse step

* Sources the default setup for all Cloud Pipelines Concourse scripts
* Executes the passed script to run
* Passes properties via key-value Concourse resource



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 22 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_, _source_

_Exports (environment):_ CONCOURSE_SCRIPTS_RESOURCE [big]*//* KEYVALOUTPUT_RESOURCE [big]*//* KEYVAL_RESOURCE [big]*//* OUTPUT_RESOURCE [big]*//* REPO_RESOURCE [big]*//* ROOT_FOLDER [big]*//* SCRIPTS_RESOURCE


task.sh(1)
==========
:compat-mode!:

NAME
----
task.sh - a shell script

SYNOPSIS
--------

Generates and commits a version and passes it to the Concourse key-value resource.



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 34 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_

_Exports (environment):_ GIT_BIN [big]*//* KEYVALOUTPUT_RESOURCE [big]*//* ROOT_FOLDER


task.sh(1)
==========
:compat-mode!:

NAME
----
task.sh - a shell script

SYNOPSIS
--------

This script:

* Retrieves the latest production tag
* Calls api compatibility step
* Calls build and upload step
* Commits a tag with pipeline version



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 22 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_, _source_

_Exports (environment):_ CONCOURSE_SCRIPTS_RESOURCE [big]*//* KEYVALOUTPUT_RESOURCE [big]*//* KEYVAL_RESOURCE [big]*//* OUTPUT_RESOURCE [big]*//* REPO_RESOURCE [big]*//* ROOT_FOLDER [big]*//* SCRIPTS_RESOURCE


task.sh(1)
==========
:compat-mode!:

NAME
----
task.sh - a shell script

SYNOPSIS
--------

This script:

* Sources default Cloud Pipelines Concourse scripts setup
* Loads all git related functionality to allow tag manipulation
* Calls the production deployment script of Cloud Pipelines script



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 22 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_, _source_

_Exports (environment):_ CONCOURSE_SCRIPTS_RESOURCE [big]*//* KEYVALOUTPUT_RESOURCE [big]*//* KEYVAL_RESOURCE [big]*//* OUTPUT_RESOURCE [big]*//* REPO_RESOURCE [big]*//* ROOT_FOLDER [big]*//* SCRIPTS_RESOURCE


task.sh(1)
==========
:compat-mode!:

NAME
----
task.sh - a shell script

SYNOPSIS
--------

This script:

* Sources default Cloud Pipelines Concourse scripts setup
* Loads all git related functionality to allow tag manipulation
* Calls the production rollback script of Cloud Pipelines script



FUNCTIONS
---------


DETAILS
-------

Script Body
~~~~~~~~~~~

Has 22 line(s). No functions are called (may set up e.g. a hook, a Zle widget bound to a key, etc.).

Uses feature(s): _export_, _source_

_Exports (environment):_ CONCOURSE_SCRIPTS_RESOURCE [big]*//* KEYVALOUTPUT_RESOURCE [big]*//* KEYVAL_RESOURCE [big]*//* OUTPUT_RESOURCE [big]*//* REPO_RESOURCE [big]*//* ROOT_FOLDER [big]*//* SCRIPTS_RESOURCE
